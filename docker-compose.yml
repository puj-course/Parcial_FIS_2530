version: '3.8'

services:
  biblioteca-fis:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: biblioteca-fis-app
    stdin_open: true  # Equivalente a -i (interactive)
    tty: true         # Equivalente a -t (tty para entrada de consola)
    environment:
      - JAVA_OPTS=-Xmx512m -Xms256m
      - TZ=America/Bogota
    volumes:
      # Persistir archivos temporales
      - ./temp:/app/temp
      # Persistir archivos de configuraci√≥n (opcional)
      - ./conf:/app/conf:ro
    networks:
      - biblioteca-network
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "java", "-version"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s

networks:
  biblioteca-network:
    driver: bridge

volumes:
  temp-data: